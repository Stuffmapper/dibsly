
<div class="container overlap"  >

  	<div class="col-md-4 col-md-offset-8" id="stuffmapper-menu"> 
    <alerts></alerts>
    <tabset>

    <tab heading="Get Stuff" disabled="tab.disabled" >
       <div id="get-stuff" >
          <div ng-repeat="item in markers" class="col-md-4 clearfix">
            <div class="stuff-view" title={{item.description}} ng-attr-id={{item.id + '-stuff'}}>
              <div class= "stuff-image-container clearfix">

              <div class="stuff-description">
                <a href="post/{{item.id}}" class='btn-default btn-xs align-right'>Details</a>
                   
                <p>{{item.description}}</p>
              </div>
                
                <img class="stuff-image" src={{item.image_url}} ></img>

              </div>

              <div class="col-md-12">
                <dib post="item.id"></dib>   
              </div>
            </div>
                   
          </div>
       </div>
    </tab>


     <tab heading="Give Stuff" disabled="tab.disabled" ng-click="startMapper()">
        <div ng-hide="loading">
          <p> Take a picture of the stuff that you want to give </p>
          <form id="give-stuff-form">

            <div class="form-group">

              <div id="give-stuff-file-container" class='btn '>

                <span class="glyphicon glyphicon-camera" aria-hidden="true"></span>

                 <input type="file" id="give-stuff-file" file-upload   />


              </div> 
            </div>


            <div class="form-group col-md-12 row">

              <select class="form-control" id="category" placeholder="Category" ng-model="post.category" >
                <option>Stuff</option>
                <option>Other Stuff</option>
                <option>More Stuff</option>
                <option>Best Stuff</option>
              </select>
           
            </div>

            <div class="form-group col-md-12 row"> 
              <input type="text" class="form-control" id="description" placeholder="Describe this stuff (you can use #tags)" ng-model="post.description">
            </div>

            <div class="checkbox">
              <label><input type="checkbox" id="on_the_curb" name="on_the_curb" ng-model="post.on_the_curb" value='' >This item is on the curb/outside/unattended by me. </label>
            </div>

            <div class="form-group">
                <button class="btn" id="give-stuff-submit" ng-click="submitPost()">Give this stuff!</button>
            </div>
          </form>
        </div>

        <div ng-show="loading">
          <p> Your photo is loading </p>
        </div>
      </tab>

     <tab heading="My Stuff"  ng-click="getMyStuff()">
        <div id="my-stuff" >
    
          <div ng-repeat="post in mystuff track by $index" id="mystuff-{{post.id}}" ng-hide="post == undefined" >
            <div class="stuff-view col-md-4"  title={{stuff.description}}  ng-hide=editing  >
                <div class= "stuff-image-container" >
                  <div class="stuff-description" >
                    <a href="post/{{post.id}}" class='btn-default btn-xs align-right'>Details</a>
                    <p>{{post.description}}</p>
                  </div>

                  <img class="stuff-image" src={{post.image_url}} ></img>
                </div>

             

              
                 <undib post="post.id" mystuff="post" ng-hide="currentUser == post.creator"></undib> 
                 <button class= "btn-xs btn-default" ng-click='editing = !editing' ng-show="currentUser == post.creator">Edit</button>
            </div>
             <edit post="post.id" stuff="post" markers="markers" editing=editing ng-show=editing  ></edit> 
           

          </div>
       </div>
     </tab>

  

  </tabset>
 

	</div>

</div>

<div class="container-fluid" id="map-container"  >
   


<map id="google-map-container"  center={{mapCenter}} zoom="12"> 
  <div class='g-marker' ng-repeat="post in markers">
    <marker position="{{post.coords.latitude}}, {{post.coords.longitude}}"  title: "{{post.description}}" icon=<%= asset_path('green-icon-small.png')%> id="marker-{{post.id}}" on-click="showInfoWindow(event, 'info-{{post.id}}' )"></marker>
    <info-window id='info-{{post.id}}' visible-on-marker="marker-{{post.id}}">
      <div ng-non-bindable="">
        <div id="siteNotice"></div>
         <img class="stuff-map-image" src={{post.image_url}} ></img>
        <div id="bodyContent">
          <p>{{post.description}}</p>
          <dib post="post.id"></dib>   
        </div>
      </div>
    </info-window>
  </div>


</map>

</div>

